(()=>{"use strict";class e{constructor(e,t="No due date"){this.name=e,this.date=t}setName(e){this.name=e}setDate(e){this.date=e}getName(){return this.name}getDate(){return this.date}getDateFormatted(){this.date.split("/")[0],this.date.split("/")[1],this.date.split("/")[2]}}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){n(1,arguments);var a=Object.prototype.toString.call(e);return e instanceof Date||"object"===t(e)&&"[object Date]"===a?new Date(e.getTime()):"number"==typeof e||"[object Number]"===a?new Date(e):("string"!=typeof e&&"[object String]"!==a||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}Math.pow(10,8);var s=36e5;function i(e,t){var a;n(1,arguments);var i=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(a=null==t?void 0:t.additionalDigits)&&void 0!==a?a:2);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var h,f=function(e){var t,n={},a=e.split(r.dateTimeDelimiter);if(a.length>2)return n;if(/:/.test(a[0])?t=a[0]:(n.date=a[0],t=a[1],r.timeZoneDelimiter.test(n.date)&&(n.date=e.split(r.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var s=r.timezone.exec(t);s?(n.time=t.replace(s[1],""),n.timezone=s[1]):n.time=t}return n}(e);if(f.date){var p=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};var s=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?s:100*i,restDateString:e.slice((a[1]||a[2]).length)}}(f.date,i);h=function(e,t){if(null===t)return new Date(NaN);var n=e.match(o);if(!n)return new Date(NaN);var a=!!n[4],s=c(n[1]),i=c(n[2])-1,r=c(n[3]),d=c(n[4]),l=c(n[5])-1;if(a)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,d,l)?function(e,t,n){var a=new Date(0);a.setUTCFullYear(e,0,4);var s=7*(t-1)+n+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+s),a}(t,d,l):new Date(NaN);var u=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(m[t]||(g(e)?29:28))}(t,i,r)&&function(e,t){return t>=1&&t<=(g(e)?366:365)}(t,s)?(u.setUTCFullYear(t,i,Math.max(s,r)),u):new Date(NaN)}(p.restDateString,p.year)}if(!h||isNaN(h.getTime()))return new Date(NaN);var k,v=h.getTime(),y=0;if(f.time&&(y=function(e){var t=e.match(d);if(!t)return NaN;var n=u(t[1]),a=u(t[2]),i=u(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,a,i)?n*s+6e4*a+1e3*i:NaN}(f.time),isNaN(y)))return new Date(NaN);if(!f.timezone){var T=new Date(v+y),L=new Date(0);return L.setFullYear(T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate()),L.setHours(T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds(),T.getUTCMilliseconds()),L}return k=function(e){if("Z"===e)return 0;var t=e.match(l);if(!t)return 0;var n="+"===t[1]?-1:1,a=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(a*s+6e4*i):NaN}(f.timezone),isNaN(k)?new Date(NaN):new Date(v+y+k)}var r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e){return e?parseInt(e):1}function u(e){return e&&parseFloat(e.replace(",","."))||0}var m=[31,null,31,30,31,30,31,31,30,31,30,31];function g(e){return e%400==0||e%4==0&&e%100!=0}class h{constructor(e){this.name=e,this.tasks=[]}addTask(e){this.tasks.push(e)}deleteTask(e){for(let t=0;t<this.tasks.length;t++)if(e==this.tasks[t].name){let e=this.tasks.slice(0,t),n=this.tasks.slice(t+1),a=e.concat(n);this.tasks=a}}getTasks(){return this.tasks}setTasks(e){this.tasks=e}getName(){return this.name}setName(e){this.name=e}sortTasks(){this.tasks.sort(((e,t)=>function(e,t){n(2,arguments);var s=a(e),i=a(t),r=s.getTime()-i.getTime();return r<0?-1:r>0?1:r}(i(e.date),i(t.date))))}}class f{constructor(e,t,n="No due date"){this.name=e,this.projectName=t,this.date=n}}let p=document.getElementById("inboxButton"),k=document.getElementById("display"),v=document.getElementById("projectsSidebar"),y=document.querySelectorAll(".sidebarButton"),T=new h("Inbox"),L=document.getElementById("addProject"),E=document.getElementById("addProjectContainer"),N=document.getElementById("addProjectOpen"),S=document.getElementById("cancelAddProject"),D=document.getElementById("newProjectName"),b=document.querySelectorAll(".projectSidebar"),w=new class{constructor(){this.list=[]}addProject(e){this.list.push(e)}deleteProject(e){for(let t=0;t<this.list.length;t++)if(e==this.getList()[t].name){let e=this.getList().slice(0,t),n=this.getList().slice(t+1),a=e.concat(n);this.list=a}}getList(){return this.list}setList(e){this.list=e}getStorage(){this.setList(JSON.parse(localStorage.getItem("projects")))}setStorage(){localStorage.setItem("projects",JSON.stringify(this.list))}};w.addProject(T);let I,j=document.getElementById("addTaskOpen"),B=document.getElementById("addTaskContainer"),C=document.getElementById("cancelAddTask"),x=document.getElementById("addTask"),A=document.getElementById("newTaskName"),M=document.querySelectorAll(".checkbox"),q=document.querySelectorAll(".taskDate"),U=document.getElementById("projectTitle"),P=document.getElementById("todayButton"),H=document.querySelectorAll(".deleteProject"),$=document.getElementById("upcomingButton");function O(e){e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("pressed")})),t.classList.add("pressed")}))}))}function F(){v.innerHTML="";for(let e=1;e<w.getList().length;e++)v.innerHTML+=`<div id = ${w.getList()[e].name} class = projectSidebar><p class = 'projectSidebarName'>`+w.getList()[e].name+'</p><button class = "deleteProject hidden">X</button></div>',b=document.querySelectorAll(".projectSidebar");H=document.querySelectorAll(".deleteProject"),b.forEach((e=>{e.addEventListener("mouseover",(()=>{H.forEach((t=>{e.contains(t)?t.classList.remove("hidden"):t.classList.add("hidden")}))})),e.addEventListener("mouseleave",(()=>{H.forEach((t=>{e.contains(t)&&t.classList.add("hidden")}))}))})),H.forEach((e=>{e.addEventListener("click",(()=>{var t;t=e.parentElement.id,w.getList().forEach((e=>{e.name==t&&(w.deleteProject(t),w.setStorage(),F())})),F(),Q()}))}))}function Z(t){let n=Y(t);console.log("func"),k.innerHTML="",k.innerHTML+='<h2 id = "projectTitle">'+n.name+"</h2><div id = 'taskContainer'></div>",I=document.getElementById("taskContainer"),z(n),k.innerHTML+='<div class="hidden" id = "addTaskContainer">'+B.innerHTML+'</div><button id = "addTaskOpen">+ Add task</button><br>',j=document.getElementById("addTaskOpen"),M=document.querySelectorAll(".checkbox"),q=document.querySelectorAll(".taskDate"),B=document.getElementById("addTaskContainer"),C=document.getElementById("cancelAddTask"),x=document.getElementById("addTask"),A=document.getElementById("newTaskName"),W(),j.addEventListener("click",(()=>{B.classList.remove("hidden"),j.classList.add("hidden")})),x.addEventListener("click",(()=>{if(A.value){let t=A.value,n=document.getElementById("projectTitle").innerText;if(function(e,t){for(let n=0;n<t.tasks.length;n++)if(t.tasks[n].name==e)return alert("A task with this name already exists!"),!1;return!0}(t,Y(n))){for(let a=0;a<w.getList().length;a++)if(n==w.getList()[a].name){let n=new e(t);w.getList()[a].tasks.push(n),w.setStorage(),I=document.getElementById("taskContainer"),z(w.getList()[a]),R(w.getList()[a]),W()}K()}}})),C.addEventListener("click",(()=>{K()})),R(n)}function z(e){console.log("display"),I.innerHTML="",e.tasks.forEach((e=>{I.innerHTML+=`<div class = "taskCell"><div class = "nameAndCheck"><input class = "checkbox" type = "checkbox" id = "${e.name}">\n        <p class = "taskName">`+e.name+'</p></div><div class = "taskDateContainer">'+`<p id = "${e.name}Date" class = "taskDate">`+e.date+"</p></div>"})),M=document.querySelectorAll(".checkbox"),R(e)}function Y(e){for(let t=0;t<w.getList().length;t++)if(e==w.getList()[t].name)return w.getList()[t]}function J(e){let t;k.innerHTML="",k.innerHTML+="<h2 id = 'projectTitle'>"+e+"</h2><div id = 'taskContainer'></div>",I=document.getElementById("taskContainer"),t="Today"==e?function(){let e=(new Date).toJSON().slice(0,10),t=new h("today");for(let n=0;n<w.getList().length;n++){let a=w.getList()[n];for(let n=0;n<a.tasks.length;n++)if(a.tasks[n].date==e){let e=new f(a.tasks[n].name,a.name,a.tasks[n].date);t.addTask(e)}}return t}():function(){let e=new h("Upcoming");return w.getList().forEach((t=>{t.tasks.forEach((n=>{let a=new f(n.name,t.name,n.date);e.addTask(a)}))})),e.sortTasks(),e}(),t.getTasks().forEach((e=>{I.innerHTML+=`<div class = "taskCell"><div class = "nameAndCheck"><input class = "checkbox" type = "checkbox" id = "${e.name}-${e.projectName}">\n        <p class = "taskName">`+e.name+`(${e.projectName})</p></div><div class = "taskDateContainer">`+`<p id = "${e.name}Date-${e.projectName}" class = "taskDate">`+e.date+"</p></div>"})),q=document.querySelectorAll(".taskDate"),M=document.querySelectorAll(".checkbox"),W(),function(e){M.forEach((t=>{t.addEventListener("change",(()=>{let n=t.id,a=n.split("-")[0];console.log(a);let s=n.split("-")[1],i=Y(s),r=new h(s);r.setTasks(i.tasks),r.deleteTask(a),console.log(r),G(r),J(e)}))}))}(e)}function R(e){M.forEach((t=>{t.addEventListener("click",(()=>{let n=new h(e.name);n.setTasks(e.tasks);let a=t.id;n.deleteTask(a),e.tasks=n.getTasks(),G(e),Z(e.name)}))}))}function G(e){w.getList().forEach((t=>{t.name==e.name&&(t.tasks=e.tasks,w.setStorage(),z(t),console.log(t))}))}function W(){q=document.querySelectorAll(".taskDate"),q.forEach((e=>{e.addEventListener("click",(()=>{console.log("dateClick");let t=document.createElement("input");t.classList.add("dateInput"),t.id=e.id,t.type="date",e.parentNode.replaceChild(t,e),U=document.getElementById("projectTitle"),"Today"!=U.innerText&&"Upcoming"!=U.innerText||function(e){let t=document.querySelector(".dateInput");t.addEventListener("change",(()=>{let n=new Date(t.value);if(n instanceof Date&&!isNaN(n.valueOf())){console.log(t.id);let n=t.id.split("-")[0].slice(0,-4);console.log(n);let a=t.id.split("-")[1];console.log(a),X(Y(a),n,t.value),J(e)}}))}(U.innerText),function(e){let t=document.querySelector(".dateInput");t.addEventListener("change",(()=>{let n=new Date(t.value),a=t.id;a=a.slice(0,-4),n instanceof Date&&!isNaN(n.valueOf())&&(X(e,a,t.value),Z(e.name),console.log(e))}))}(Y(U.innerText))}))}))}function X(e,t,n){e.tasks.forEach((a=>{a.name==t&&(a.date=n,G(e))}))}function K(){B.classList.add("hidden"),j.classList.remove("hidden")}function Q(){b=document.querySelectorAll(".projectSidebar");for(let e=0;e<b.length;e++)b[e].addEventListener("click",(()=>{Z(b[e].id)})),O([...y,...b])}null!=localStorage.getItem("projects")&&w.getStorage(),null!=w.getList()&&F(),Z("Inbox"),O([...y,...b]),Q(),p.addEventListener("click",(()=>{k.innerText="",Z("Inbox")})),N.addEventListener("click",(()=>{E.classList.remove("hidden"),N.classList.add("hidden")})),S.addEventListener("click",(()=>{E.classList.add("hidden"),N.classList.remove("hidden")})),L.addEventListener("click",(()=>{(function(e){let t;(function(e){for(let t=0;t<w.getList().length;t++)if(w.getList()[t].name==e)return alert("A project with this name already exists"),!1;return!0})(e)&&(t=new h(e),w.addProject(t),w.setStorage(),w.getStorage(),F())})(D.value),w.getStorage(),F()})),P.addEventListener("click",(()=>{J("Today")})),$.addEventListener("click",(()=>{J("Upcoming")}))})();